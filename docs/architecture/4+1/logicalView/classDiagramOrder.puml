@startuml
title Diagramme de classes - Order-Service

class Order {
  -id : Long
  -clientOrderId : String
  -userId : Long
  -symbol : String
  -side : Side {ACHAT, VENTE}
  -type : OrderType {MARCHE, LIMITE}
  -quantity : int
  -price : Double
  -duration : DurationType {DAY, IOC, FOK}
  -timestamp : Instant
  -status : OrderStatus
  -rejectReason : String
  -version : Long
}

class OutboxEvent {
    -id : Long
    -eventID : UUID
    -eventType : String
    -aggregateId : String
    -payload : String
    -createdAt : Instant
    -processedAt : Instant
    -retryCount : Integer
    -maxRetries : Integer
    -nextRetryAt : Instant
    -errorMessage : String
    +isProcessed() : boolean
    +canRetry() : boolean
    +incrementRetryCount() : void
    +markAsProcessed() : void
    +markAsFailed(errorMessage : String) : void
}

@enduml
