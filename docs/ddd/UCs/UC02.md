# UC-02 — Authentification & MFA

## Objectif
Assurer la sécurité d’accès à la plateforme BrokerX en permettant aux clients de s’authentifier via identifiant/mot de passe et un code multi-facteurs (OTP), afin de protéger les comptes contre toute tentative d’accès non autorisée.

## Acteur principal
Client

## Déclencheur
Le Client souhaite se connecter à la plateforme.

## Pré-conditions
Le compte du Client doit être au statut "ACTIVE".

## Postconditions (succès)
- Une session valide est établie pour le client (token de session).
- Le rôle de "Client" est associé à la session.

## Postconditions (échec)
- Aucune session n’est créée.
- Le Client ne peut pas accéder à la plateforme.

## Flux principal
1. Le Client saisit son identifiant et son mot de passe.
2. Le Système vérifie l’état du compte ainsi que les informations entrées par le client.
3. Le Système envoit un code temporaire à l'utilisation par email.
4. Le Client saisit le code MFA reçu.
5. Le Système valide le code entré, génère le token de session et journalise l’audit (IP, device, horodatage).

## Alternatifs / Exceptions
E1. **Challenge MFA expiré** : Si le code MFA n’est pas saisi dans le délai imparti, l’authentification échoue et le Client doit recommencer.\
E2. **Challenge MFA déjà utilisé** : Si le code MFA a déjà été utilisé, l’authentification échoue et un nouveau challenge doit être généré.\
E3. **Échec MFA (3 tentatives)** : Après 3 échecs de saisie du code MFA, l'utilisateur est verrouillé pendant 30 secondes et il doit attendre avant de réessayer.\
E4. **Compte suspendu** : Si le Client rate une 4e fois, son compte est suspendu et il doit contacter le support.\
E5. **Compte non actif** : Si le compte n’est pas au statut "ACTIVE", l’authentification est rejetée avec une raison précisée.

---
**Critère d’acceptation** :
Un client saisit ses identifiants valides, reçoit le code MFA, le saisit correctement, et accède à la plateforme avec une session active.
